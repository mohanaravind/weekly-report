<link rel="import" href="bower_components/polymer/polymer-element.html">
<script src="https://www.gstatic.com/firebasejs/4.3.1/firebase.js"></script>

<dom-module id="wy-data">  
  <script>    
    class Data extends Polymer.Element {
      static get is() { return "wy-data" }                        
      
      connectedCallback() {
        super.connectedCallback();        
      }
                       
      static get properties() {
        
      }
                             
      
      async fetchReport(userid, weeknumber) {                                        
        const snapshot = await firebase.database().ref(`/reports/${weeknumber}/${userid}/report`).once('value');          
        const reports = snapshot.val();
        
        return reports;        
      }
      
      async saveReport(userid, weeknumber, data) {
        const timestamp = firebase.database.ServerValue.TIMESTAMP;        
        
        const report = { data, timestamp }
        
        firebase.database().ref(`/reports/${weeknumber}/${userid}/report`).set(report);
      }
      

      
      
    }
    
    
    
    window.addEventListener('WebComponentsReady', function() {      
      customElements.define('wy-data', Data);
    });
  </script>
</dom-module>