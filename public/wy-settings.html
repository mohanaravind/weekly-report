<link rel="import" href="bower_components/polymer/polymer-element.html">

<dom-module id="wy-settings">
  <template>
    <style>
      :host {
        display: flex;        
        justify-content: center;
        background: rgba(255, 255, 255, 0.09);
        padding: 10px;
	      border-radius: 5px;
        width: 100%;
      }
      
      #container {        
        display: flex;	      
        flex-direction: column;
        color: white;
      }
      
      .field {
        padding: 5px;
        display: flex;
	      justify-content: flex-start;
        color: white;
      }
      
      .input {
        padding: 10px;
	      border: thin solid #cbcbcb;
        border-radius: 5px;        
      }   
      
            
    </style> 
    
        
    <div class="container" on-keydown="_onEnter">      
      <div class="field">
        <label>Submit my reports to</label>
      </div>
      <div class="field">        
        <input id="email" type="email" class="input" placeholder="trigram@3ds.com" value="{{settings.reviewer}}"/>
      </div>
      
      <div class="field">
        <wy-button on-click="_update">
          UPDATE
        </wy-button>
      </div>
    </div>        
  </template>
  
  <script>    
    class Settings extends Polymer.Element {
      static get is() { return "wy-settings"; }  
      
      static get properties() {
        return {
          settings: Object
        }
      }
      
      _onEnter(event) {
        if (event.keyCode == 13) {
          this._update();
        }
      }
      
      _update() {
        const data = {
          reviewer: this.$.email.value
        };
        const detail = { data };
        
        this.dispatchEvent(new CustomEvent('settings-update', { detail }));
      }
      
      init(settings) {
        this.settings = settings;
      }
    }
    
    
    
    
    
    window.addEventListener('WebComponentsReady', function() {      
      customElements.define('wy-settings', Settings);
    });
  </script>
</dom-module>